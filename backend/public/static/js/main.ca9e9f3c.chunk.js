(this.webpackJsonpsocia=this.webpackJsonpsocia||[]).push([[0],{59:function(e,t,n){},61:function(e,t,n){},67:function(e,t,n){},72:function(e,t,n){"use strict";n.r(t);var r=n(1),s=n.n(r),a=n(48),c=n.n(a),i=n(76),l=n(32),o=n(49),u=(n(59),n(17)),d=n(5),j=n(16),x=n(0),m=Object(r.createContext)();function b(e){var t=e.children,n=Object(r.useState)(),s=Object(j.a)(n,2),a=s[0],c=s[1],i=Object(r.useState)(),l=Object(j.a)(i,2),o=l[0],u=l[1],d=Object(r.useState)(),b=Object(j.a)(d,2),p=b[0],f=b[1],h=Object(r.useState)(!0),O=Object(j.a)(h,2),v=O[0],g=O[1],N=Object(r.useState)(!0),y=Object(j.a)(N,2),w=y[0],S=y[1],k=Object(r.useState)([]),P=Object(j.a)(k,2),I={authToken:a,setAuthToken:c,currentUser:o,setCurrentUser:u,darkMode:p,setDarkMode:f,headerShown:v,setHeaderShown:g,footerShown:w,setFooterShown:S,breadcrumbs:P[0],setBreadcrumbs:P[1]};return Object(x.jsx)(m.Provider,{value:I,children:t})}function p(){return Object(r.useContext)(m)}n(61);var f=n(9),h=n(22),O=n(7),v=n.n(O),g=n(13),N=function(){var e=Object(g.a)(v.a.mark((function e(t,n){var r,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/auth",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({email:t,password:n})});case 2:return r=e.sent,e.next=5,r.json();case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=Object(g.a)(v.a.mark((function e(t){var n,r,s,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,r=t.password,e.next=3,fetch("/api/signup",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({email:n,password:r})});case 3:return s=e.sent,e.next=6,s.json();case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function w(){var e=p(),t=(e.authToken,e.setAuthToken),n=e.setCurrentUser,r=Object(d.g)();return Object(x.jsx)(h.a,{initialValues:{email:"",password:""},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",t},onSubmit:function(e,s){s.setSubmitting;var a=s.setErrors,c=s.errors;N(e.email,e.password).then((function(e){if(e.errors)a(Object(f.a)(Object(f.a)({},c),e.errors));else{var s=e.token,i=e.user;n(i),t(s),localStorage.setItem("authToken",JSON.stringify({token:s,exp:(new Date).getTime()+864e5,user:i})),r.push("/")}})).catch((function(e){console.log(e.message)}))},children:function(e){var t=e.values,n=e.errors,r=e.touched,s=e.handleChange,a=e.handleBlur,c=e.handleSubmit;e.isSubmitting;return Object(x.jsxs)("form",{onSubmit:c,className:"form flex flex-col items-center rounded bg-gray-300 p-10 shadow-md max-w-96 w-full",children:[Object(x.jsx)("div",{className:"text-2xl mb-8",children:"Sign In"}),Object(x.jsxs)("div",{className:"form-control flex flex-col  my-1 text-lg w-full",children:[Object(x.jsx)("label",{htmlFor:"email",className:"flex text-xs text-gray-700",children:"email"}),Object(x.jsx)("input",{type:"email",name:"email",id:"email",className:"flex w-full",onChange:s,onBlur:a,value:t.email}),Object(x.jsx)("div",{className:"err text-red-600 text-xs font-mono",children:n.email&&r.email&&n.email})]}),Object(x.jsxs)("div",{className:"form-control flex flex-col my-1 text-lg w-full",children:[Object(x.jsx)("label",{htmlFor:"password",className:"flex text-xs text-gray-700",children:"password"}),Object(x.jsx)("input",{type:"password",name:"password",id:"password",className:"flex w-full",onChange:s,onBlur:a,value:t.password}),Object(x.jsx)("div",{className:"err text-red-600 text-xs font-mono",children:n.password&&r.password&&n.password})]}),Object(x.jsx)("div",{className:"actions mt-3",children:Object(x.jsx)("button",{type:"submit",className:"w-full p-3 text-center text-blue-500 ",children:"Submit"})})]})}})}function S(){var e=p(),t=(e.authToken,e.setAuthToken),n=e.setCurrentUser,r=Object(d.g)();return Object(x.jsx)(h.a,{initialValues:{email:"",password:""},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",t},onSubmit:function(e,s){s.setSubmitting;var a=s.setErrors,c=s.errors;y({email:e.email,password:e.password}).then((function(e){if(e.errors)a(Object(f.a)(Object(f.a)({},c),e.errors));else{var s=e.token,i=e.user;n(i),t(s),localStorage.setItem("authToken",JSON.stringify({token:s,exp:(new Date).getTime()+864e5,user:i})),r.push("/")}})).catch((function(e){console.log(e.message)}))},children:function(e){var t=e.values,n=e.errors,r=e.touched,s=e.handleChange,a=e.handleBlur,c=e.handleSubmit;e.isSubmitting;return Object(x.jsxs)("form",{onSubmit:c,className:"form flex flex-col items-center rounded bg-gray-300 p-10 shadow-md max-w-96 w-full",children:[Object(x.jsx)("div",{className:"text-2xl mb-8",children:"Sign Up"}),Object(x.jsxs)("div",{className:"form-control flex flex-col  my-1 text-lg w-full",children:[Object(x.jsx)("label",{htmlFor:"email",className:"flex text-xs text-gray-700",children:"email"}),Object(x.jsx)("input",{type:"email",name:"email",id:"email",className:"flex w-full",onChange:s,onBlur:a,value:t.email}),Object(x.jsx)("div",{className:"err text-red-600 text-xs font-mono",children:n.email&&r.email&&n.email})]}),Object(x.jsxs)("div",{className:"form-control flex flex-col my-1 text-lg w-full",children:[Object(x.jsx)("label",{htmlFor:"password",className:"flex text-xs text-gray-700",children:"password"}),Object(x.jsx)("input",{type:"password",name:"password",id:"password",className:"flex w-full",onChange:s,onBlur:a,value:t.password}),Object(x.jsx)("div",{className:"err text-red-600 text-xs font-mono",children:n.password&&r.password&&n.password})]}),Object(x.jsx)("div",{className:"actions mt-3",children:Object(x.jsx)("button",{type:"submit",className:"w-full p-3 text-center text-blue-500",children:"Create Account"})})]})}})}function k(){var e=Object(r.useState)(!1),t=Object(j.a)(e,2),n=t[0],s=t[1];return Object(x.jsx)("div",{className:"loginPage bg-gray-800",children:Object(x.jsxs)("div",{className:"flex flex-col justify-center items-center w-full h-screen max-w-md m-auto px-4",children:[n?Object(x.jsx)(S,{}):Object(x.jsx)(w,{}),Object(x.jsx)("div",{className:"text-mono text-white text-xs p-2",children:n?Object(x.jsxs)("div",{children:["already have an account ?"," ",Object(x.jsx)("span",{className:"text-blue-400 cursor-pointer",onClick:function(){return s(!1)},children:"Login"})]}):Object(x.jsxs)("div",{children:["don't have an account ?"," ",Object(x.jsx)("span",{className:"text-blue-400 cursor-pointer",onClick:function(){return s(!0)},children:"Create an Account"})]})})]})})}function P(e){var t=p(),n=t.setCurrentUser,r=t.setAuthToken,s=Object(d.g)();return Object(x.jsx)("button",Object(f.a)(Object(f.a)({onClick:function(){n(null),r(null),localStorage.removeItem("authToken"),s.push("/")}},e),{},{children:"Logout"}))}var I=n(41),C=n.n(I),U=n(52),T=n.n(U),A=n(53),F=n.n(A);n(67);function q(e){var t,n,r=e.post,s=e.linked,a=u.b;return s||(a=function(e){var t=e.children;return Object(x.jsx)("div",{children:t})}),Object(x.jsx)("div",{className:"post p-4 my-2 bg-gray-700 rounded min-w-full",children:Object(x.jsx)(a,{to:"/post/".concat(r.id),children:Object(x.jsxs)("div",{children:[Object(x.jsxs)("header",{className:"pb-2 flex items-center",children:[Object(x.jsx)("div",{className:"pic w-8 h-8 overflow-hidden rounded-full bg-gray-500",children:Object(x.jsx)("img",{src:null===(t=r.user)||void 0===t?void 0:t.profilePictureUrl,alt:"",className:"w-full object-cover"})}),Object(x.jsxs)("div",{className:"flex flex-col px-2 ",children:[Object(x.jsx)("div",{className:"text-xs text-gray-400",children:null===(n=r.user)||void 0===n?void 0:n.name}),Object(x.jsx)("div",{className:"text-xs text-gray-500",style:{fontSize:"0.6em"},children:C()(parseInt(r.createdAt)).format("DD MMM YYYY")})]})]}),Object(x.jsx)("div",{className:"py-2",dangerouslySetInnerHTML:{__html:F()(r.text)}})]})})})}C.a.extend(T.a);var $=n(75),D=n(77),E=n(21),J=n(15),B=new J.GraphQLClient("/graphql");var M,L,Q=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=B.request(e,n,{authorization:t});return r},Y=function(){var e=Object(g.a)(v.a.mark((function e(t,n){var r,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.userId,t.username,s=Object(J.gql)(M||(M=Object(E.a)(["\n    query getUsers($input: UserInput) {\n      users(input: $input) {\n        id\n        name\n        username\n        bio\n        email\n        profilePictureUrl\n      }\n    }\n  "]))),e.abrupt("return",Q(s,n,{input:{id:r}}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Z=function(){var e=Object(g.a)(v.a.mark((function e(t,n){var r,s,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.userId,s=t.data,a=Object(J.gql)(L||(L=Object(E.a)(["\n    mutation updateUser($input: UserInput) {\n      updateUser(input: $input) {\n        id\n        name\n        username\n        bio\n        email\n        profilePictureUrl\n      }\n    }\n  "]))),e.abrupt("return",Q(a,n,{input:Object(f.a)(Object(f.a)({},s),{},{id:r})}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),R=function(e){var t=e.userId,n=p().authToken;return Object($.a)(["user",t],(function(){return Y({userId:t},n)}))};function V(e){var t,n=e.onCancel,s=p().currentUser,a=null===(t=R({userId:s.id}).data)||void 0===t?void 0:t.users[0],c=function(){var e=p(),t=e.authToken,n=e.currentUser,r=Object(l.b)();return Object(D.a)((function(e){var r=e.data;return Z({userId:n.id,data:r},t)}),{onSuccess:function(e,t){r.invalidateQueries(["user",n.id])}})}(),i={name:a.name||"",bio:a.bio||"",profilePictureUrl:a.profilePictureUrl||""};Object(r.useEffect)((function(){c.isSuccess&&n()}),[c.isSuccess]);return a?Object(x.jsx)("div",{className:"edit-profile m-auto max-w-4xl p-8 bg-gray-700 bg-opacity-50 rounded-xl",children:Object(x.jsx)(h.a,{initialValues:i,onSubmit:function(e){c.mutate({data:e})},children:function(e){var t=e.values,r=e.errors,s=(e.touched,e.handleSubmit),a=e.handleChange;return Object(x.jsxs)("form",{onSubmit:s,children:[Object(x.jsxs)("div",{className:"form-group my-4 flex flex-col",children:[Object(x.jsx)("label",{className:"text-gray-400",children:"Name"}),Object(x.jsx)("input",{type:"text",placeholder:"Your Name",name:"name",onChange:a,value:t.name,className:"bg-transparent p-2 mb-2 border-b outline-none"}),r.name&&Object(x.jsx)("div",{className:"error text-red-500 text-xs",children:r.name})]}),Object(x.jsxs)("div",{className:"form-group my-4 flex flex-col",children:[Object(x.jsx)("label",{className:"text-gray-400",children:"Bio"}),Object(x.jsx)("textarea",{type:"text",placeholder:"About You",name:"bio",onChange:a,value:t.bio,className:"bg-transparent p-2 mb-2 border-b outline-none"}),r.bio&&Object(x.jsx)("div",{className:"error text-red-500 text-xs",children:r.bio})]}),Object(x.jsxs)("div",{className:"form-group my-4 flex flex-col",children:[Object(x.jsx)("label",{className:"text-gray-400",children:"Profile Picture Url"}),Object(x.jsx)("input",{type:"text",placeholder:"link of the picture for your dp",name:"profilePictureUrl",onChange:a,value:t.profilePictureUrl,className:"bg-transparent p-2 mb-2 border-b outline-none"}),r.profilePictureUrl&&Object(x.jsx)("div",{className:"error text-red-500 text-xs",children:r.profilePictureUrl})]}),Object(x.jsxs)("div",{className:"actions flex justify-end mt-8",children:[Object(x.jsx)("button",{className:"px-4 py-2",type:"button",onClick:n,children:"Cancel"}),Object(x.jsx)("button",{className:"px-4 py-2 text-blue-400",type:"submit",children:"Save"})]})]})}})}):null}var _,H,z,G,W=n(78),K=function(){var e=Object(g.a)(v.a.mark((function e(t,n){var r,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.userId,t.isFollowing,s=Object(J.gql)(_||(_=Object(E.a)(["\n    query getPosts($input: PostInput) {\n      posts(input: $input) {\n        id\n        text\n        userId\n        user {\n          id\n          name\n          username\n          profilePictureUrl\n        }\n        createdAt\n      }\n    }\n  "]))),e.abrupt("return",Q(s,n,{input:{userId:r}}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),X=function(){var e=Object(g.a)(v.a.mark((function e(t,n){var r,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.postId,s=Object(J.gql)(H||(H=Object(E.a)(["\n    query getPosts($input: PostInput) {\n      posts(input: $input) {\n        id\n        text\n        userId\n        privacy\n        published\n        comments {\n          id\n          text\n        }\n        user {\n          id\n          name\n          username\n          profilePictureUrl\n        }\n        createdAt\n      }\n    }\n  "]))),e.abrupt("return",Q(s,n,{input:{id:parseInt(r)}}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ee=function(e){var t=e.userId,n=e.isFollowing,r=p().authToken,s=["posts"];return t&&(s=["posts",t]),Object(W.a)(s,(function(e){var s=e.pageParam;return K({userId:t,isFollowing:n,skip:s},r)}),{getNextPageParam:function(e){return e.skip?e.skip:null}})},te=function(){var e,t=p(),n=t.authToken,r=t.currentUser,s=Object(l.b)();return Object(D.a)((e=n,function(){var t=Object(g.a)(v.a.mark((function t(n){var r,s;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.text,s=Object(J.gql)(z||(z=Object(E.a)(["\n    mutation createPost($input: PostInput) {\n      createPost(input: $input) {\n        id\n        text\n        userId\n        privacy\n        published\n        comments {\n          id\n          text\n        }\n        user {\n          id\n          name\n          username\n          profilePictureUrl\n        }\n        createdAt\n      }\n    }\n  "]))),t.abrupt("return",Q(s,e,{input:{text:r}}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),{onSuccess:function(e){console.log("Post Created - ",e),s.setQueryData(["posts",r.id],(function(t){var n;if(t){var r=JSON.parse(JSON.stringify(t));return null===r||void 0===r||null===(n=r.pages)||void 0===n||n[0].posts.unshift(e.createPost),r}})),s.invalidateQueries(["posts",null])},onError:function(e){console.log("Failed to create Post - ",e.message)}})},ne=function(){var e,t=p(),n=t.authToken,r=t.currentUser,s=Object(l.b)();return Object(D.a)((e=n,function(){var t=Object(g.a)(v.a.mark((function t(n){var r,s;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.id,s=Object(J.gql)(G||(G=Object(E.a)(["\n    mutation deletePost($input: PostInput) {\n      deletePost(input: $input)\n    }\n  "]))),t.abrupt("return",Q(s,e,{input:{id:parseInt(r)}}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),{onSuccess:function(e,t){var n=t.id;console.log("Post Deleted - ",n,e),s.setQueryData(["posts",r.id],(function(e){var t;if(e){var r=JSON.parse(JSON.stringify(e));return null===r||void 0===r||null===(t=r.pages)||void 0===t||t.some((function(e){return!!e.posts.find((function(e){return e.id==n}))&&(e.posts=e.posts.filter((function(e){return e.id!=n})),!0)})),r}}))},onError:function(e){console.log("Failed to delete Post - ",e)}})};function re(){var e,t,n=p().currentUser,s=null===(e=R({userId:n.id}).data)||void 0===e?void 0:e.users[0],a=ee({userId:n.id}),c=Object(r.useState)(!1),i=Object(j.a)(c,2),l=i[0],o=i[1];return s?Object(x.jsx)("div",{className:"bg-gray-800   text-white",children:Object(x.jsxs)("div",{className:"container min-h-screen m-auto max-w-6xl px-4",children:[Object(x.jsxs)("header",{className:"p-4 py-16 flex justify-between items-center",children:[Object(x.jsx)("div",{className:"user flex items-center justify-between",children:Object(x.jsxs)("div",{className:"info ml-5",children:[Object(x.jsx)("div",{className:"name text-xl",children:s.name}),Object(x.jsx)("div",{className:"email text-gray-400",children:s.email})]})}),Object(x.jsxs)("div",{className:"actions",children:[Object(x.jsx)("button",{className:"px-6",onClick:function(){return o((function(e){return!e}))},children:l?"Cancel":"Edit Profile"}),Object(x.jsx)(P,{className:"px-6 text-red-400"})]})]}),l?Object(x.jsx)(V,{onCancel:function(){return o(!1)}}):Object(x.jsxs)("div",{children:[Object(x.jsxs)("main",{className:"flex flex-col justify-center items-center my-5",children:[Object(x.jsx)("div",{className:"pic w-36 h-36 overflow-hidden rounded-full bg-gray-500",children:Object(x.jsx)("img",{src:s.profilePictureUrl,alt:"",className:"w-full object-cover"})}),Object(x.jsxs)("div",{className:"info py-4 flex flex-col items-center",children:[Object(x.jsx)("div",{className:"name text-2xl",children:s.name}),Object(x.jsx)("div",{className:"bio max-w-4xl py-4 text-center text-gray-300",children:s.bio})]})]}),Object(x.jsxs)("div",{className:"py-4 w-full max-w-4xl m-auto",children:[Object(x.jsx)("div",{className:"post-actions my-3",children:Object(x.jsx)(u.b,{to:"/create",children:Object(x.jsx)("button",{className:"text-yellow-300",children:"Create New Post"})})}),Object(x.jsx)("section",{className:"flex flex-col justify-center items-center ",children:null===(t=a.data)||void 0===t?void 0:t.pages.map((function(e){return e.posts})).flat().map((function(e){return Object(x.jsx)(q,{post:e,linked:!0},e.id)}))})]})]})]})}):null}function se(e){var t=e.data,n=(e.onCancel,t||{text:""}),s=Object(d.g)(),a=Object(r.useRef)(),c=te();return Object(x.jsxs)("div",{children:[Object(x.jsx)(h.a,{initialValues:n,onSubmit:function(e){c.mutate(e,{onSuccess:function(){a.current.resetForm(),setTimeout((function(){c.reset(),s.push("/profile")}),2e3)}})},innerRef:a,children:function(e){var t=e.values,n=e.errors,r=(e.touched,e.handleSubmit),s=e.handleChange;return Object(x.jsxs)("form",{onSubmit:r,children:[Object(x.jsxs)("div",{className:"form-group my-4 flex flex-col",children:[Object(x.jsx)("textarea",{type:"text",placeholder:"What's in your Mind...",name:"text",onChange:s,value:t.text,style:{minHeight:"15rem"},className:"bg-transparent p-2 mb-2 border-b outline-none"}),n.text&&Object(x.jsx)("div",{className:"error text-red-500 text-xs",children:n.text})]}),Object(x.jsx)("div",{className:"actions flex justify-end mt-8",children:Object(x.jsx)("button",{className:"px-4 py-2 text-blue-400",type:"submit",children:"Post"})})]})}}),Object(x.jsxs)("div",{className:"py-4",children:[c.isSuccess&&Object(x.jsx)("div",{className:"text-green-400 text-center",children:"Post Created Successfully"}),c.isError&&Object(x.jsx)("div",{className:"text-red-400 text-center",children:"Some Error Occured"})]})]})}function ae(){return Object(x.jsx)("div",{className:"bg-gray-800   text-white",children:Object(x.jsxs)("div",{className:"container min-h-screen m-auto max-w-6xl p-16",children:[Object(x.jsx)("h1",{className:"text-2xl mb-8",children:"Create New Post"}),Object(x.jsx)(se,{})]})})}function ce(e){var t,n=e.history,r=e.match,s=p().currentUser,a=function(e){var t=e.postId,n=p().authToken;return Object($.a)(["post",t],(function(){return X({postId:t},n)}),{staleTime:3e5})}({postId:r.params.id}),c=ne(),i=null===(t=a.data)||void 0===t?void 0:t.posts[0];return Object(x.jsx)("div",{className:"bg-gray-800   text-white",children:Object(x.jsxs)("div",{className:"container min-h-screen m-auto max-w-6xl p-16",children:[Object(x.jsx)("h1",{className:"text-2xl mb-8",children:"Post"}),i&&Object(x.jsxs)("div",{className:"py-4",children:[Object(x.jsx)(q,{post:i}),i.userId==s.id&&Object(x.jsx)("div",{className:"py-4",children:Object(x.jsx)("button",{className:"text-red-400",onClick:function(){c.mutate({id:r.params.id},{onSuccess:function(){setTimeout((function(){c.reset(),n.push("/profile")}),1e3)}})},children:"Delete Post"})})]}),a.data&&!i?Object(x.jsx)("div",{className:"text-red-400",children:"Post Not Found"}):null,c.isSuccess&&Object(x.jsx)("div",{className:"text-green-400",children:"Deleted Successfully !"}),c.isError&&Object(x.jsx)("div",{className:"text-red-400",children:"Opps Something went wrong."})]})})}var ie=n(54);function le(e){var t,n;Object(ie.a)(e);var r=p().currentUser,s=ee({});return Object(x.jsx)("div",{className:"bg-gray-800   text-white",children:Object(x.jsxs)("div",{className:"container min-h-screen m-auto max-w-6xl py-16 px-4",children:[Object(x.jsxs)("header",{className:"flex justify-between",children:[Object(x.jsx)("h1",{className:"text-3xl",children:"Socia"}),Object(x.jsx)("div",{className:"user flex items-center justify-between",children:Object(x.jsxs)("div",{className:"flex items-center",children:[Object(x.jsx)(u.b,{to:"/create",children:Object(x.jsx)("button",{title:"create post",className:"font-bold text-2xl",children:"+"})}),Object(x.jsx)(u.b,{to:"/profile",children:Object(x.jsxs)("div",{className:"info ml-5 flex items-center",children:[Object(x.jsx)("div",{className:"name px-2",children:r.name}),Object(x.jsx)("div",{className:"pic w-8 h-8 overflow-hidden rounded-full bg-gray-500",children:Object(x.jsx)("img",{src:r.profilePictureUrl,alt:"",className:"w-full object-cover"})})]})})]})})]}),Object(x.jsx)("main",{className:"py-8 max-w-3xl m-auto",children:null===(t=s.data)||void 0===t||null===(n=t.pages)||void 0===n?void 0:n.map((function(e){return e.posts})).flat().map((function(e){return Object(x.jsx)(q,{post:e,linked:!0},e.id)}))})]})})}function oe(){var e=p(),t=e.authToken,n=e.setAuthToken,s=e.setCurrentUser;return Object(r.useEffect)((function(){var e=localStorage.getItem("authToken");try{(e=JSON.parse(e))&&(e.exp>(new Date).getTime()?(n(e.token),s(e.user)):(console.log("token Expired"),localStorage.removeItem("authToken")))}catch(t){console.log(t.message)}}),[]),Object(x.jsx)(u.a,{children:Object(x.jsxs)(d.d,{children:[Object(x.jsx)(d.b,{exact:!0,path:"/",children:t?Object(x.jsx)(d.a,{to:"/feed"}):Object(x.jsx)(k,{})}),Object(x.jsx)(d.b,{exact:!0,path:"/auth",component:k}),t&&Object(x.jsx)(d.b,{exact:!0,path:"/profile",component:re}),t&&Object(x.jsx)(d.b,{exact:!0,path:"/create",component:ae}),t&&Object(x.jsx)(d.b,{exact:!0,path:"/post/:id",component:ce}),t&&Object(x.jsx)(d.b,{exact:!0,path:"/feed",component:le})]})})}var ue=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,79)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),s(e),a(e),c(e)}))},de=new i.a({defaultOptions:{queries:{retry:function(e,t){return!t&&(e<3||void 0)},staleTime:3e5}}});c.a.render(Object(x.jsx)(s.a.StrictMode,{children:Object(x.jsxs)(l.a,{client:de,children:[Object(x.jsx)(b,{children:Object(x.jsx)(oe,{})}),Object(x.jsx)(o.ReactQueryDevtools,{initialIsOpen:!1})]})}),document.getElementById("root")),ue()}},[[72,1,2]]]);
//# sourceMappingURL=main.ca9e9f3c.chunk.js.map